Basado en la revisi贸n del c贸digo y la funcionalidad, voy a crear un prompt detallado para que otra IA entienda ApostAmo:# ApostAmo - Sistema de Apuestas Amistosas

## Descripci贸n del Sistema
ApostAmo es una plataforma de apuestas amistosas que permite a los usuarios crear y participar en apuestas utilizando una moneda virtual llamada "diamantes". El sistema est谩 dise帽ado para ser justo, transparente y social.

## Componentes Principales

### 1. Sistema de Usuarios
- Cada usuario nuevo recibe 1000  diamantes iniciales
- Autenticaci贸n mediante usuario y contrase帽a
- Seguimiento de balance de diamantes en tiempo real

### 2. Sistema de Apuestas
- **Creaci贸n de Apuestas**
  - T铆tulo/Pregunta de la apuesta
  - Dos opciones para apostar (Opci贸n A y Opci贸n B)
  - Generaci贸n autom谩tica de token para juez
  - Estado de apuesta (activa/finalizada)

- **Participaci贸n en Apuestas**
  - Los usuarios pueden apostar en cualquier lado
  - Sistema de apuestas ordenado por tiempo de entrada
  - Validaci贸n de balance suficiente
  - Actualizaci贸n en tiempo real de totales

- **Finalizaci贸n de Apuestas**
  - Sistema de juez imparcial con token 煤nico
  - Distribuci贸n justa de ganancias
  - C谩lculo proporcional de recompensas
  - Historial de resultados

### 3. L贸gica de Negocio Clave

#### Distribuci贸n de Ganancias
```python
# Pseudoc贸digo de distribuci贸n
def distribuir_ganancias(apuesta, lado_ganador):
    # 1. Pool total del lado perdedor
    pool_disponible = total_lado_perdedor
    
    # 2. Procesar ganadores en orden de entrada
    for apuesta in lado_ganador:
        if pool_disponible > 0:
            # Calcular ganancia proporcional
            ganancia = min(apuesta.cantidad, pool_disponible)
            usuario.diamantes += (apuesta.cantidad + ganancia)
            pool_disponible -= ganancia
        else:
            # Devolver apuesta original si no hay m谩s pool
            usuario.diamantes += apuesta.cantidad
```

### 4. Reglas del Sistema
1. Los usuarios no pueden apostar m谩s diamantes de los que tienen
2. Las apuestas solo pueden ser finalizadas por el juez designado
3. Los resultados son permanentes una vez declarados
4. Las ganancias se distribuyen en orden de entrada
5. Los usuarios reciben al menos su apuesta original de vuelta

### 5. Interfaz de Usuario
- Dise帽o responsive para m贸vil y escritorio
- Actualizaci贸n en tiempo real de estados
- Panel de usuario persistente
- Visualizaci贸n clara de estad铆sticas

### 6. Almacenamiento de Datos
- Base de datos SQLite con tablas para:
  - Usuarios (username, password, diamonds)
  - Apuestas (id, question, options, totals, status)
  - Participaciones (bet_id, username, amount, side)

### 7. Endpoints Principales
POST /create # Crear nueva apuesta
GET /bet/{id} # Ver apuesta espec铆fica
POST /bet/{id}/place # Realizar apuesta
GET /bet/{id}/judge/{token} # Panel del juez
POST /judge/{id}/decide # Finalizar apuesta


## Consideraciones T茅cnicas
1. Manejo de concurrencia en transacciones
2. Validaci贸n de tokens de juez
3. Persistencia de sesiones de usuario
4. Manejo de errores y excepciones
5. Actualizaciones en tiempo real

## Objetivos del Sistema
1. Proporcionar una plataforma justa para apuestas amistosas
2. Mantener la integridad de las transacciones
3. Ofrecer una experiencia de usuario fluida
4. Garantizar la transparencia en los resultados
5. Facilitar la interacci贸n social entre usuarios